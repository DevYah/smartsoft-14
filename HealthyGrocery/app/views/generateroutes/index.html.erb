<%= include_gon %>

<!DOCTYPE html>
<html>
<body>



<script type="text/javascript" >
var satisfied=false;
// var way_points=gon.wps;

var timelimit=gon.tmlmt;
console.log(timelimit);
/*var directionsService = new google.maps.DirectionsService();


function calcRoute() {
  var start = new google.maps.LatLng(0,0);
  var end = start
  var waypoints=[];


for (var i = 0; i < way_points.length-1; i+=2) {
    
      waypoints.push({
          location: new google.maps.LatLng(way_points[i],way_points[i+1]),
          stopover:true
      });
    }

while(!satisfied){
    var request = {
    origin: start,
    destination: end,
    waypoints: waypoints,
    travelMode: google.maps.TravelMode.DRIVING,
    optimizeWaypoints: true
    // provideRouteAlternatives: true

  };
  directionsService.route(request, function(result, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      
      if(computeTotalDuration(result)<=timelimit)
            satisfied=true;
        else{

             waypoints.pop();

        }

    }
  });




}
}



function computeTotalDuration(result) {
  var total = 0;
  var routedurations=[];
for(var j=0;j<result.routes.length;j++){
  var myroute = result.routes[j];
  var total = 0;
  for (var i = 0; i < myroute.legs.length; i++) {
    total += myroute.legs[i].duration.value;
  }
  routedurations.push(total);
}
 


var min=routedurations[0];
for (i=1;i<routedurations.length;i++){
if(routedurations[i]<min){
	min=routedurations[i];
}

}

return min;


}


*/
</script>



</html>
</body>