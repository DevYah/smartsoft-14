<!--to check the adminstration level-->
<%= csrf_meta_tag %>
<% if current_member.email!='healthygrocery@gmail.com'%>

<h1>YOU ARE NOT AUTHOURIZED TO SEE THIS PAGE!</h1>
<%= link_to_function "Back", "history.back()" %>
<%else%>
<head>

<style>

  h1{


    height:10px;
    font-size: 40px;
    width:100%;
    position:relative;
    text-align:center;
    float:left;

  }

  table{
    margin:5px;
    padding: 5px;
    border:1px solid #0000ff;
    height:auto;
    width:auto;
    float:left;
    text-align:center;
    background:orange;

  }
  s
  opt
  {

    position:absolute;
    width:130px;
    height:50px;
    -webkit-transition:width 0.4s; /* For Safari 3.1 to 6.0 */
    transition:width 0.4s;
    padding:10px;
    left-margin:10px;
    text-align:center;
  }
</style>



<script type="text/javascript">
</script>
</head>
<body>


  
  <!--Author: Amr Nabil -->
  <!--Team: GUI -->
  <!--Function: the page for items in the warehouse displaying only items in the warehouse with no other links-->
  <img src="http://iconizer.net/files/Containers/orig/fork3.png" style="width:100px">
  <h1 style="position:absolute;top:140px; right:350px">My Warehouse</h1>
  <!--Author: Amr Nabil -->
  <!--Team: 3 -->
  <!--Function : paginates items to be displayed in the warehouse -->
                    
  

  <!-- table for items attributes -->
  <table class="table table-striped table-bordered table-condensed">
    <thead>
      <tr>
        
        <th colspan="1"><h1 style="font-size:20px;bottom:12px">Name</h1></th>
        <th colspan="1"><h1 style="font-size:20px;bottom:12px">Price</h1></th>
        <th colspan="1"><h1 style="font-size:20px;bottom:12px">Category</h1></th>
        <th colspan="1"><h1 style="font-size:20px;bottom:12px">Stock</h1></th>
        <th colspan="1"><h1 style="font-size:20px;bottom:12px">Status</h1></th>
        <th colspan="1"><h1 style="font-size:20px;bottom:12px">Description</h1></th>
        <th colspan="1"><h1 style="font-size:20px;bottom:12px">Actions</h1></th>
        <th colspan="1"><h1 style="font-size:20px;bottom:12px">Discounts</h1></th>
      </tr>
    </thead>
<%# paginate @items %>
    <!-- looping on the items in the items model in the DB-->
    <%= javascript_include_tag "application" %>
    <tbody>
      <% unless @items.empty? %>

        <% @items.each do |item| %>
          <tr>
              <td><%= item.name %></td>
              <td><%= item.price %></td>
              <td><%= item.category %></td>
              <td><%= item.amount %></td>
              <td><%= item.paused %></td>
              <% # Author: Hazem Amin %>
              <% #Component: 5 %>
              <% # Printing the value of paused (true or false) for each and every item, depending on that record %>
              <td><%= item.description %></td>
              
              <td><ul><li><%= link_to (item.paused ? "Pause" : "Resume" ) , toggle_pause_item_path(item), {:confirm => item.paused ? "Are you Sure you want to pause the time?" : "Are you sure you want to resume the item?" }  %></li>
              <% # Author: Hazem Amin%>
              <% # Component: 5%>
              <% # button_to %>
              <% # A paused button which name is Paused/Resume based on the status of paused for each specific item, it then goes to the toggle pause as dedined in routes%>
              <li><%= link_to 'Show', item %></li>
              <li><%= link_to 'Edit', edit_item_path(item) %></li>
              <li><%= link_to 'Destroy', item, method: :delete, data: { confirm: 'Are you sure?' } %></li></td></ul>
          

              <%#Author: Abdelrahman Sakr
              #Team: 1
              #Function: Adding text field to specify the discount amount, and two buttons "Make Discount" and "Remove Discount" to make discount or remove the discount%>
             
              <td>
                <% @discount_item_id = item.id %>
                <%= form_tag(makediscount_path) do %>
                
                  <%= hidden_field_tag(:discount_item_id, @discount_item_id ) %>
                  <%= text_field_tag (:discount_amount)%>
                  <%= submit_tag "Make Discount"%>
                
              <%end%>
              
              <li><%= link_to 'Remove Discount', removediscount_path(item) %></li></td>
          </tr>    
              

            
            


          </tr>
        
        <%end%>
      <%else%>
        <tr>
          <!--Author: Amr Nabil -->
          <!--Team:3>  
          <!-- whenever the warehouse is empty this table row is displayed -->  
          <td colspan="0">Your Warehouse is empty Sir !!</td>
        </tr>
      <%end%>
     
    </tbody>
  </table></br>

  <br/>
  <!-- link to insert new item page -->
  </br>
  <div class="contextual">
        <%= link_to(new_item_path, class: "btn btn-success") do %>
          Insert new item  <i class="icon-plus icon-white"></i>
        <%end%>
  </div>

</body>
<%end%>
